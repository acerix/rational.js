<!DOCTYPE html>
<html lang="en-ca">
<head>
<meta charset="utf-8">
<title>rational.js tester</title>
<script src="../src/integer.js"></script>
<script src="../src/rat.js"></script>
<script src="../src/rational.js"></script>
<script src="../src/biginteger.js"></script>
<script src="../src/bigint.js"></script>
<script src="../src/bigrat.js"></script>
<script src="../src/physics.js"></script>
<script>

var input, output;

window.onload = function() {
	input = document.getElementById('input');
	input.focus();
	output = document.getElementById('output');
	go();
}

function go() {
	eval('{'+input.value+'}');
}

function clr() {
	output.innerHTML = '';
}

function print(s) {
	output.innerHTML += s.toString() + '\n';
}

function display(s) {
	output.innerHTML = s.toString();
}

var alt_down = false, shift_down = false, ctrl_down = false;

function insertTextAtCursor(text) {
	var sel, range, html;
	if (window.getSelection) {
		sel = window.getSelection();
		if (sel.getRangeAt && sel.rangeCount) {
			range = sel.getRangeAt(0);
			range.deleteContents();
			range.insertNode( document.createTextNode(text) );
		}
	}
	else if (document.selection && document.selection.createRange) {
		document.selection.createRange().text = text;
	}
}

window.onkeydown = function(e) {
	if (!e) e=event;
	var k = e.which;
    switch (k) {
		case 9: // tab
			e.preventDefault();
			insertTextAtCursor('\t');
			break;
		case 13: // enter                   
			if (alt_down) clr();
			if (alt_down||ctrl_down) go();
			break;
		case 16: // shift
			shift_down = true;
			break;
		case 17: // ctrl
			ctrl_down = true;
			break;
		case 18: // alt
			alt_down = true;
			break;
		default: print('key down: '+k);
	}
}

window.onkeyup = function(e) {
	//clr(); go();
	var k = (e?e:event).which;
    switch (k) {
		case 16: // shift
			shift_down = false;
			break;
		case 17: // ctrl
			ctrl_down = false;
			break;
		case 18: // alt
			alt_down = false;
			break;
	}
}

function dumpStack() {
	try {fake+=0;}
	catch(e) {console.log(e.stack);}
}

</script>
</head>
<body>

<textarea id="input" style="width:99%;padding:3px 10px;" rows="24">

var nth = 2;
var root = bigrat.fromInteger(2);

for (var n=1; n<30; n++) {
  print('nthRoot('+n+', '+nth+')');
  bigrat.nthRoot(root, bigrat.fromInteger(n), nth);
  print(bigrat.dump(root));
}

var PHI = ( 1 + Math.sqrt(5) ) / 2;
print(bigrat.dump(bigrat.fromDecimal(PHI)));
print(bigrat.dump(bigrat.fromDecimal(PHI - 1)));

bigrat.PHI = bigrat.fromInteger(5);
bigrat.sqrt(bigrat.PHI, bigrat.clone(bigrat.PHI));
bigrat.add(bigrat.PHI, bigrat.clone(bigrat.PHI), bigrat.ONE);
bigrat.scalar_divide(bigrat.PHI, bigrat.clone(bigrat.PHI), 2);
print(bigrat.dump(bigrat.PHI));

bigrat.PHII = bigrat.create();
bigrat.invert(bigrat.PHII, bigrat.PHI);
print(bigrat.dump(bigrat.PHII));
print(bigrat.dump(bigrat.PHII));

print(bigrat.dump(bigrat.fromDecimal(Math.PI)));
print(rat.dump(rat.PI));
print(bigrat.dump(bigrat.PI));

print(bigrat.dump(physics.A));
print(bigrat.dump(bigrat.invert(bigrat.create(), physics.A)));

print(bigrat.dump(physics.H));
print(bigrat.dump(physics.HBAR));

print(bigrat.dump(bigrat.fromDecimal(Math.E)));

print(bigrat.dump(bigrat.fromDecimal(Math.LN2)));
print(bigrat.dump(bigrat.fromDecimal(Math.LOG2E)));
print(bigrat.dump(bigrat.fromDecimal(Math.LN10)));
print(bigrat.dump(bigrat.fromDecimal(Math.LOG10E)));

print(rational.fromDecimal(420.00000069).dump());

print(new rational(420, 69).times(new rational(123, 456)).pow(4).divide(new rational(2446, 445)).divide(new rational(22, 33)).dump());


</textarea>

<br />

<input type="button" value="go" onclick="clr();go();" style="width:98%;margin:10px;float:right;">

<pre id="output" style="width:99%;border:1px black outset;clear:both;padding:10px;"></pre>

</body>
</html>
